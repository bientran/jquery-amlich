/**
* amlich v0.1
*/
!function(n){function t(n,t,a,r,e){this.day=n,this.month=t,this.year=a,this.leap=r,this.jd=e}function a(n){return Math.floor(n)}function r(n,t,r){var e=a((14-t)/12),i=r+4800-e,h=t+12*e-3,s=n+a((153*h+2)/5)+365*i+a(i/4)-a(i/100)+a(i/400)-32045;return s}function e(n,a){var e,h,s,d,o,u,c,l,g,m=new Array;for(e=new Array(29,30),h=new Array(12),s=a>>17,d=15&a,o=e[a>>16&1],u=r(1,1,n),c=u+s,l=a>>4,i=0;i<12;i++)h[12-i-1]=e[1&l],l>>=1;if(0==d)for(g=1;12>=g;g++)m.push(new t(1,g,n,0,c)),c+=h[g-1];else{for(g=1;d>=g;g++)m.push(new t(1,g,n,0,c)),c+=h[g-1];for(m.push(new t(1,d,n,1,c)),c+=o,g=d+1;12>=g;g++)m.push(new t(1,g,n,0,c)),c+=h[g-1]}return m}function h(n){var t;return t=1900>n?G[n-1800]:2e3>n?Q[n-1900]:2100>n?q[n-2e3]:Y[n-2100],e(n,t)}function s(n,a){if(n>R||O>n||a[0].jd>n)return new t(0,0,0,0,n);for(var r=a.length-1;n<a[r].jd;)r--;var e=n-a[r].jd;return ret=new t(a[r].day+e,a[r].month,a[r].year,a[r].leap,n),ret}function d(n,t,a){var e,i;return e=h(a),i=r(n,t,a),i<e[0].jd&&(e=h(a-1)),s(i,e)}function o(n){var t=new Array;if(n.length<2)return t;var a,r,e=n.substring(1,n.length),i=e.split("&");for(a=0;a<i.length;a++){var h=i[a].split("=");for(r=0;r<h.length;r++)t.push(h[r])}return t}function u(){var n,t=window.location.search,a=o(t);for(n=0;n<a.length;n++)"mm"==a[n]?_=parseInt(a[n+1]):"yy"==a[n]&&(nn=parseInt(a[n+1]))}function c(n,t){var a,e,i,d,o,u,c,l,g;if(12>n?(u=n+1,c=t):(u=1,c=t+1),d=r(1,n,t),o=r(1,u,c),a=h(t),i=a[0].jd,l=new Array,d>=i)for(g=d;o>g;g++)l.push(s(g,a));else if(i>d&&i>o)for(a=h(t-1),g=d;o>g;g++)l.push(s(g,a));else if(i>d&&o>=i){for(e=h(t-1),g=d;i>g;g++)l.push(s(g,e));for(g=i;o>g;g++)l.push(s(g,a))}return l}function l(n){if(0==n.day)return"";var t=m(n),a="Ngày "+t[0]+", tháng "+t[1]+", năm "+t[2];return a}function g(n){return F[(n+6)%10]+" "+P[(n+8)%12]}function m(n){var t,a,r;return t=F[(n.jd+9)%10]+" "+P[(n.jd+1)%12],a=F[(12*n.year+n.month+3)%10]+" "+P[(n.month+1)%12],1==n.leap&&(a+=" (nhuận)"),r=g(n.year),new Array(t,a,r)}function p(n,t,a,r){var e,i=K[(n.jd+1)%7];return e=i+" "+t+"/"+a+"/"+r,e+=" (",e=e+"Ngày "+n.day+" tháng "+n.month,1==n.leap&&(e+=" nhuận"),e}function y(){var n=p($,Z.getDate(),Z.getMonth()+1,Z.getFullYear());return n+=" năm "+g($.year)+")"}function f(n){for(var t=(n+1)%12,a=W[t%6],r="",e=0,i=0;12>i;i++)"1"==a.charAt(i)&&(r+=P[i],r+=" ("+(2*i+23)%24+"-"+(2*i+1)%24+")",e++<5&&(r+=", "),3==e&&(r+="\n"));return r}function v(n){var t,r,e,i,h,s,d,o,u;return t=(n-2451545)/36525,r=t*t,e=U/180,i=357.5291+35999.0503*t-1559e-7*r-4.8e-7*t*r,h=280.46645+36000.76983*t+3032e-7*r,s=(1.9146-.004817*t-14e-6*r)*Math.sin(e*i),s=s+(.019993-101e-6*t)*Math.sin(2*e*i)+29e-5*Math.sin(3*e*i),o=h+s,u=125.04-1934.136*t,d=o-.00569-.00478*Math.sin(u*e),d*=e,d-=2*U*a(d/(2*U))}function T(n,t){return a(v(n-.5-t/24)/U*12)}function N(n){return F[2*(n-1)%10]}function b(){return u(),w(_,nn)}function w(n,t){var a="";return a+=D(n,t)}function M(n){var t="Năm "+g(n)+" "+n,a="";a+='<table align="center">\n',a+="<tbody>\n",a+="<tr>\n",a+='  <td colspan="3" class="amlich-tennam" onClick="showYearSelect();">'+t+"</td>\n",a+="</tr>\n";for(var r=1;12>=r;r++)r%3==1&&(a+="<tr>\n"),a+="<td>\n",a+=D(r,n),a+="</td>\n",r%3==0&&(a+="</tr>\n");return a+="</tbody>\n",a+="</table>\n"}function j(){return u(),M(nn)}function D(n,t){var a,r,e,i,h=c(n,t);if(0==h.length)return!1;var s=h[0],d=(s.jd+1)%7,o=(g(s.year),"");for(o+='<table class="amlich" border="0" cellpadding="4" cellspacing="0" width="'+S.tableWidth+'">\n',o+="<tbody>\n",o+=A(n,t),a=0;6>a;a++){for(o+="<tr>\n",r=0;7>r;r++)e=7*a+r,d>e||e>=d+h.length?(o+='<td class="ngaythang">\n',o+='  <div class="cn">&nbsp;</div>\n',o+='  <div class="am">&nbsp;</div>\n',o+="</td>\n"):(i=e-d+1,s=h[e-d],o+=B(s,i,n,t));o+="</tr>\n"}return o+="</tbody>\n",o+="</table>\n"}function C(n,t){var a=n>1?n-1:12,r=n>1?t:t-1;return'<a class="prev-month" data-yy="'+r+'" data-mm="'+a+'" href="#">&nbsp;&lsaquo;&nbsp;</a>'}function H(n,t){var a=12>n?n+1:1,r=12>n?t:t+1;return'<a class="next-month" data-yy="'+r+'" data-mm="'+a+'" href="#">&nbsp;&rsaquo;&nbsp;</a>'}function x(n,t){return'<a class="prev-year" data-yy="'+(t-1)+'" data-mm="'+n+'" href="#">&lsaquo;&lsaquo;</a>'}function L(n,t){return'<a class="next-year" data-yy="'+(t+1)+'" data-mm="'+n+'" href="#">&rsaquo;&rsaquo;</a>'}function A(n,t){var a="",r=n+"/"+t;switch(S.type){case"month":a+="<tr>\n",a+='  <td colspan="2" class="navi-l">'+x(n,t)+" &nbsp;"+C(n,t)+"</td>\n",a+='  <td colspan="3" class="tenthang">'+r+"</td>\n",a+='  <td colspan="2" class="navi-r">'+H(n,t)+" &nbsp;"+L(n,t)+"</td></tr>\n",a+="</tr>\n";break;case"year":a+="<tr>\n",a+='  <td colspan="7" class="tenthang">'+r+"</td>\n",a+="</tr>\n";break;case"calendar":var e=m($),i=k(Z.getDate(),Z.getMonth()+1,$.day,$.month);a+="<tr>\n",a+='  <td colspan="7">\n',a+='    <table class="calendar" border="0" cellpadding="4" cellspacing="0" width="100%">\n',a+="      <tbody>\n",a+="        <tr>\n",a+='          <td colspan="2" class="calendar-month">Tháng '+(Z.getMonth()+1)+" Năm "+Z.getFullYear()+"</td>\n",a+="        </tr>\n",a+="        <tr>\n",a+='          <td colspan="2" class="calendar-day">\n',a+='            <span class="day-num">'+Z.getDate()+"</span><br>\n",a+="            <span>"+K[($.jd+1)%7]+"</span>\n",a+="          </td>\n",a+="        </tr>\n",a+="        <tr>\n",a+='          <td width="50%" class="calendar-b-left" valign="top">\n',a+="            <span>Tháng "+z[$.month-1]+"</span><br>\n",a+='            <span class="lunar-day-num">'+$.day+"</span><br>\n",a+="            <span>"+e[2]+"</span>\n",a+="          </td>\n",a+='          <td width="50%" class="calendar-b-right" valign="top">\n',a+="            <span>Ngày <strong>"+e[0]+"</strong></span><br>\n",a+="            <span>Tháng <strong>"+e[1]+"</strong></span><br>\n",a+="            <span>Năm <strong>"+e[2]+"</strong></span><br>\n",a+="            <span>Giờ đầu <strong>"+(N($.jd)+" "+P[0])+"</strong></span><br>\n",a+="            <span>Tiết <strong>"+X[T($.jd+1,7)]+"</strong></span>\n",a+="          </td>\n",a+="        </tr>\n",a+=""!=i?'<tr><td colspan="2" class="calendar-holiday">'+i+"</td></tr>\n":"",a+="        <tr>\n",a+='          <td colspan="2" class="calendar-hoangdao">Giờ hoàng đạo: '+f($.jd)+"</td>\n",a+="        </tr>\n",a+="      </tbody>\n",a+="    </table>\n",a+="  </td>\n",a+="</tr>\n",a+="<tr>\n",a+='  <td colspan="2" class="navi-l">'+x(n,t)+" &nbsp;"+C(n,t)+"</td>\n",a+='  <td colspan="3" class="tenthang">'+r+"</td>\n",a+='  <td colspan="2" class="navi-r">'+H(n,t)+" &nbsp;"+L(n,t)+"</td></tr>\n",a+="</tr>\n"}a+="<tr>\n";for(var h=0;6>=h;h++)a+='  <td class="ngaytuan">'+E[h]+"</td>\n";return a+="</tr>\n"}function I(t,a){var r="";return n.each(J.solar,function(n,e){return e.d==t&&e.m==a?(r=e.i+" ("+e.d+"/"+e.m+" DL)",!1):void 0}),r}function V(t,a){var r="";return n.each(J.lunar,function(n,e){return e.d==t&&e.m==a?(r=e.i+" ("+e.d+"/"+e.m+" ÂL)",!1):void 0}),r}function k(n,t,a,r){var e=V(a,r),i="";return""!=e&&(i=e),e=I(n,t),""!=e&&(i=""==i?e:i+", "+e),i}function B(n,t,a,r){var e,i,h,s,e="ngaythang",i="t2t6",h="am",d="",o="",u=(n.jd+1)%7;0==u?(i="cn",s="red"):6==u&&(i="t7",s="green"),t==Z.getDate()&&a==Z.getMonth()+1&&r==Z.getFullYear()&&(e="homnay"),o=V(n.day,n.month),""!=o&&(e="leam",d=o),o=I(t,a),""!=o&&(e="leduong",d=""==d?o:d+", "+o),d=""==d?l(n):d,1==n.day&&1==n.month&&(e="tet"),1==n.leap&&(h="am2");var c=n.day;(1==t||1==c)&&(c=n.day+"/"+n.month);var g="",m=n.day+","+n.month+","+n.year+","+n.leap;return m+=","+n.jd+","+t+","+a+","+r,g+='<td class="'+e+'"',g+=null!=n?' title="'+d+'" data-args="'+m+'"':"",g+=">\n",g+='  <div class="'+i+'">'+t+"</div>\n",g+='  <div class="'+h+'">'+c+"</div>\n",g+="</td>\n"}var S={},G=new Array(3193507,5679952,4336544,2927457,5415792,3953128,6345056,4908208,3631398,5823136,4479824,3217106,5647072,4104928,2679506,5163344,3724630,6075680,4634256,3300772,5789136,4335056,2926003,5415600,4040887,6334800,4895904,3519141,5942608,4478384,3156852,5645680,4215545,6574768,5138768,3698006,6183584,4631376,3299028,5786336,4367728,2966867,5296800,3926183,6346064,4872864,3452325,5936592,4606688,3058356,5547216,4117176,6599312,5027152,3692375,6172064,4756944,3296629,5786032,4367536,2991283,5270160,3845528,6318928,4991840,3511141,5935984,4606320,3172708,5432480,3992170,6478480,5135056,3746518,6171360,4756192,3328725,5687632,4248736,2872483,5289616,3823527,6313392,4990416,3577269,5935792,4499792,3070292,5551264,3978576,2648914,5133744,3811190,6169968,4739760,3320485,5695824,4221600,2800291,5286736),Q=new Array(3951576,6441696,5023088,3691733,6083168,4512080,3233108,5658272,4233936,2774482,5262048,3843510,6333648,4772432,3396181,5813568,4380320,2928034,5412272,4147575,6572400,5022896,3585205,6056528,4615488,3124052,5647200,4232560,2904818,5261680,3827046,6214816,4778576,3369621,5790416,4467552,3114723,5411552,4049111,6474064,5035168,3528870,5944656,4609696,3253684,5645776,4231888,2806450,5286224,3716439,6188192,4765008,3494741,5787040,4367792,3097971,5526192,3975592,6351184,5008032,3583654,5942096,4606816,3189476,5678448,4215392,2683491,5167424,3726151,6084256,4757200,3427797,5917392,4367568,2938036,5419600,3986776,6337856,4896160,3626406,6067632,4606384,3189108,5678256,4237904,2730578,5139744,3779911,6204256,4756336,3427061,5917040,4482224,2913443,5302864,4024920,6444704,4893392,3577557,6066912),q=new Array(4639072,3070292,5559456,4119120,2782546,5133984,3712935,6202832,4887216,3320501,5810512,4371616,2931364,5287248,3954137,6441888,5023152,3625334,6050416,4614448,3176756,5532320,4107600,2775890,5262176,3712742,6202592,4772448,3336805,5690656,4250272,2971299,5396176,3951355,6441424,5022928,3657910,5943888,4502816,3071269,5551520,4085200,2774450,5261744,3843447,6202544,4762192,3387989,5795104,4238688,2968419,5395312,4082152,6343024,5002416,3631270,5954128,4479648,3122852,5548752,4215520,2675427,5163344,3724631,6214816,4643152,3300693,5789344,4368080,2905556,5395120,3975608,6465840,4895888,3454630,5942608,4609440,3058532,5547376,4215472,2797939,5138736,3697463,6187680,4762960,3353301,5778272,4367728,3035876,5296480,3860824,6346016,4905616,3496614,5920464,4598496,3189204,5546704,4116816,2681170),Y=new Array(5158176,3725095,6204832,4871600,3550645,5916080,4498096,3060404,5548368,3978585,6449952,5025104,3692390,6050672,4736368,3302772,5788336,4221264,2783571,5266080,3910311,6203088,4868832,3515109,5940560,4379296,3007140,5428560,4086459,6444704,5019344,3754422,6179504,4630736,3200181,5681808,4240720,2780498,5262752,3904871,6329712,4868528,3451253,5924016,4483728,2931348,5401424,4074336,2665313,5018992,3689190,6082912,4646048,3075365,5560976,4217680,2897619,5253856,3838935,6329040,4901200,3331414,5813408,4372112,3038612,5395888,4072954,6563248,5149360,3582646,6056272,4617376,3256997,5549392,4216224,2796403,5383536,3822455,6312624,4876624,3435862,5790368,4369232,3036884,5524192,3974512,2647250,5034592,3599014,5952848,4610720,3190181,5674448,4213456,2795955,5285072,3855031,6206032,4764992,3396950),F=["Giáp","Ất","Bính","Đinh","Mậu","Kỷ","Canh","Tân","Nhâm","Quý"],P=["Tý","Sửu","Dần","Mẹo","Thìn","Tỵ","Ngọ","Mùi","Thân","Dậu","Tuất","Hợi"],K=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],W=["110100101100","001101001011","110011010010","101100110100","001011001101","010010110011"],X=["Xuân phân","Thanh minh","Cốc vũ","Lập hạ","Tiểu mãn","Mang chủng","Hạ chí","Tiểu thử","Đại thử","Lập thu","Xử thử","Bạch lộ","Thu phân","Hàn lộ","Sương giáng","Lập đông","Tiểu tuyết","Đại tuyết","Đông chí","Tiểu hàn","Đại hàn","Lập xuân","Vũ thủy","Kinh trập"],z=["Một","Hai","Ba","Bốn","Năm","Sáu","Bảy","Tám","Chín","Mười","Mười một","Mười hai"],E=["CN","T2","T3","T4","T5","T6","T7"],J={solar:[{d:1,m:1,i:"Tết Dương lịch"},{d:9,m:1,i:"Ngày Học sinh - Sinh viên Việt Nam"},{d:3,m:2,i:"Ngày thành lập Đảng Cộng sản Việt Nam"},{d:27,m:2,i:"Ngày Thầy thuốc Việt Nam"},{d:8,m:3,i:"Ngày Quốc tế Phụ nữ"},{d:8,m:3,i:"Ngày thành lập Đoàn Thanh niên Cộng sản Hồ Chí Minh"},{d:26,m:3,i:"Ngày thành lập Đoàn Thanh niên Cộng sản Hồ Chí Minh"},{d:21,m:4,i:"Ngày Sách Việt Nam"},{d:30,m:4,i:"Ngày Thống nhất đất nước"},{d:1,m:5,i:"Ngày Quốc tế Lao động"},{d:15,m:5,i:"Ngày thành lập Đội Thiếu niên Tiền phong Hồ Chí Minh"},{d:19,m:5,i:"Ngày sinh của Chủ tịch Hồ Chí Minh"},{d:1,m:6,i:"Ngày Quốc tế Thiếu nhi"},{d:5,m:6,i:"Ngày Bác Hồ ra đi tìm đường cứu nước"},{d:27,m:7,i:"Ngày Thương binh Liệt sĩ"},{d:19,m:8,i:"Ngày Cách mạng tháng Tám thành công"},{d:2,m:9,i:"Ngày Quốc khánh"},{d:13,m:10,i:"Ngày Doanh nhân Việt Nam"},{d:20,m:10,i:"Ngày thành lập Hội Phụ nữ Việt Nam"},{d:20,m:11,i:"Ngày Nhà giáo Việt Nam"},{d:22,m:12,i:"Ngày thành lập Quân đội Nhân dân Việt Nam"},{d:24,m:12,i:"Ngày Lễ Giáng Sinh"}],lunar:[{d:1,m:1,i:"Tết Nguyên Đán"},{d:15,m:1,i:"Tết Nguyên tiêu"},{d:3,m:3,i:"Tết Hàn thực"},{d:10,m:3,i:"Giỗ Tổ Hùng Vương"},{d:15,m:4,i:"Lễ Phật Đản"},{d:5,m:5,i:"Tết Đoan ngọ"},{d:15,m:7,i:"Vu Lan"},{d:15,m:8,i:"Tết Trung thu"},{d:23,m:12,i:"Ông Táo chầu trời"}]},O=r(25,1,1800),R=r(31,12,2199),U=Math.PI,Z=new Date,$=d(Z.getDate(),Z.getMonth()+1,Z.getFullYear()),_=Z.getMonth()+1,nn=Z.getFullYear();n.fn.amLich=function(a){S=n.extend({type:"month",tableWidth:"500px"},a);var r=this;switch(r.on("click","td.ngaythang, td.homnay, td.tet, td.leam, td.leduong",function(a){a.preventDefault();var r=n(this).attr("data-args");if(void 0===r)return!1;var e=r.split(","),i=parseInt(e[0]),h=parseInt(e[1]),s=parseInt(e[2]),d=parseInt(e[3]),o=parseInt(e[4]),u=parseInt(e[5]),c=parseInt(e[6]),l=parseInt(e[7]),g=new t(i,h,s,d,o),y=m(g),v=k(u,c,i,h),b="◊ "+p(g,u,c,l)+" âm lịch)\n";b+="◊ Ngày "+y[0]+", tháng "+y[1]+", năm "+y[2]+"\n",b+="◊ Giờ đầu ngày "+(N(o)+" "+P[0])+"\n",b+="◊ Tiết "+X[T(o+1,7)]+"\n",b+="◊ Giờ hoàng đạo: "+f(o)+"\n",b+=""!=v?"◊ "+v:"",alert(b)}),r.on("click","td.ngaytuan",function(n){n.preventDefault()}),S.type){case"month":return r.on("click","a.prev-year, a.prev-month, a.next-month, a.next-year",function(t){t.preventDefault();var a=n(this).data("yy"),e=n(this).data("mm");return r.html(w(e,a))}),r.html(b());case"year":return r.on("click","a.prev-year, a.prev-month, a.next-month, a.next-year",function(n){n.preventDefault()}),r.html(j());case"calendar":return r.on("click","a.prev-year, a.prev-month, a.next-month, a.next-year",function(t){t.preventDefault();var a=n(this).data("yy"),e=n(this).data("mm");return r.html(w(e,a))}),r.html(b());case"text":return r.html(y())}}}(jQuery);